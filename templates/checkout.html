<!-- templates/checkout.html -->
{% extends "base.html" %}

{% block title %}Pagamento{% endblock %}

{% block content %}
<div class="container">
    <div class="auth-container">
        <div class="card">
            <h2>Completa il Pagamento</h2>
            <p class="subtitle">Stai per completare la registrazione come membro premium!</p>
            
            <div id="payment-info">
                <p>Verrai reindirizzato a Stripe per completare il pagamento in sicurezza.</p>
                <button id="checkout-button" class="btn btn-primary btn-full">Procedi al Pagamento</button>
            </div>
        </div>
    </div>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script>
    const stripe = Stripe('{{ public_key }}');
    const checkoutButton = document.getElementById('checkout-button');
    
    checkoutButton.addEventListener('click', function() {
        stripe.redirectToCheckout({
            sessionId: '{{ session_id }}'
        }).then(function(result) {
            if (result.error) {
                alert(result.error.message);
            }
        });
    });
</script>
{% endblock %}
